# /review - ì§€ëŠ¥í˜• ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ

**Claudeë¥¼ ìœ„í•œ í•„ìˆ˜ ì§€ì‹œì‚¬í•­:**

ì´ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ ë‹¨ê³„ë¥¼ **ìˆœì„œëŒ€ë¡œ** ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:

1. íŒŒì¼ ì½ê¸°ì™€ ì•„í‚¤í…ì²˜ ë¶„ì„ì„ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸° ë¶„ì„ ìˆ˜í–‰
2. ì½”ë“œ í’ˆì§ˆ, ë³´ì•ˆ, ì„±ëŠ¥ì„ ì¢…í•©ì ìœ¼ë¡œ ê²€í† 
3. OWASP Top 10 ë° ì•„í‚¤í…ì²˜ íŒ¨í„´ ì¤€ìˆ˜ ì—¬ë¶€ í™•ì¸
4. ì´ìŠˆ, ì¥ì , ê°œì„  ì œì•ˆì„ í¬í•¨í•œ ë¦¬ë·° ë¦¬í¬íŠ¸ ìƒì„±
5. ì§„í–‰í•˜ê¸° ì „ì— ì‚¬ìš©ìì—ê²Œ ë¦¬ë·° ê²°ê³¼ í™•ì¸ ìš”ì²­

**ì ˆëŒ€ë¡œ ì½”ë“œ ë¶„ì„ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›°ì§€ ë§ˆì„¸ìš”.**

---

## Overview

ë³´ì•ˆ, í’ˆì§ˆ, ì„±ëŠ¥, ì•„í‚¤í…ì²˜(architecture) ì¤€ìˆ˜ë¥¼ ë¶„ì„í•˜ëŠ” ì¢…í•© ì½”ë“œ ë¦¬ë·°(review) ì‹œìŠ¤í…œìœ¼ë¡œ, reviewer-unified ì—ì´ì „íŠ¸(agent)ë¥¼ í™œìš©í•©ë‹ˆë‹¤.

## Output Language

**IMPORTANT**: ì‚¬ìš©ìë‚˜ ë™ë£Œê°€ í™•ì¸í•˜ëŠ” ëª¨ë“  ë¦¬ë·° ê²°ê³¼ëŠ” ë°˜ë“œì‹œ **í•œê¸€ë¡œ ì‘ì„±**í•´ì•¼ í•©ë‹ˆë‹¤.

**í•œê¸€ ì‘ì„± ëŒ€ìƒ:**
- ë¦¬ë·° ë¦¬í¬íŠ¸ ì „ì²´ (ì´ìŠˆ, ì œì•ˆì‚¬í•­, ìš”ì•½)
- ë³´ì•ˆ ì·¨ì•½ì  ì„¤ëª…
- ì„±ëŠ¥ ì´ìŠˆ ë¶„ì„
- ì•„í‚¤í…ì²˜ ì¤€ìˆ˜ ì—¬ë¶€
- ê°œì„  ê¶Œì¥ì‚¬í•­

**ì˜ì–´ ìœ ì§€:**
- ì½”ë“œ, ë³€ìˆ˜ëª…, í•¨ìˆ˜ëª…, íŒŒì¼ ê²½ë¡œ
- ê¸°ìˆ  ìš©ì–´ ë° í”„ë ˆì„ì›Œí¬ ì´ë¦„
- OWASP ì¹´í…Œê³ ë¦¬ ì´ë¦„

**ì˜ˆì‹œ ë¦¬í¬íŠ¸:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ì½”ë“œ ë¦¬ë·° ë¦¬í¬íŠ¸                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ íŒŒì¼: src/auth/login.ts
ğŸ“Š í’ˆì§ˆ ì ìˆ˜: 85/100

âœ… ì¥ì :
  - ëª…í™•í•œ í•¨ìˆ˜ ë¶„ë¦¬
  - ì ì ˆí•œ ì—ëŸ¬ ì²˜ë¦¬
  - TypeScript íƒ€ì… ì•ˆì •ì„±

âš ï¸  ë°œê²¬ëœ ì´ìŠˆ:

1. [MEDIUM] ì…ë ¥ ê²€ì¦ ëˆ„ë½
   45ë²ˆ ì¤„: user.password
   â†’ ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ ì „ ê²€ì¦ ì¶”ê°€ í•„ìš”

ğŸ’¡ ì œì•ˆì‚¬í•­:
  - ê¸°ì¡´ auth/validator.ts í™œìš© ê¶Œì¥
  - ì—£ì§€ ì¼€ì´ìŠ¤ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€
```

ì´ ì»¤ë§¨ë“œëŠ” ë‹¤ìŒì„ ì œê³µí•©ë‹ˆë‹¤:
1. **ë‹¤ì¸µ ë¶„ì„**: ê¸°ë³¸ êµ¬ë¬¸ â†’ ê³ ê¸‰ ë³´ì•ˆ/ì„±ëŠ¥
2. **ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ë¦¬ë·°**: ì½”ë“œë² ì´ìŠ¤ íŒ¨í„´ê³¼ ì•„í‚¤í…ì²˜ ì´í•´
3. **ì‹¤í–‰ ê°€ëŠ¥í•œ í”¼ë“œë°±**: ìˆ˜ì • ì œì•ˆì´ í¬í•¨ëœ êµ¬ì²´ì  ì´ìŠˆ
4. **í’ˆì§ˆ ì ìˆ˜í™”**: ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ì‹ ë¢°ì„±ì— ëŒ€í•œ ìˆ˜ì¹˜ í‰ê°€

**ì£¼ìš” ê¸°ëŠ¥:**
- OWASP Top 10 ë³´ì•ˆ ìŠ¤ìº”
- ì„±ëŠ¥ ë³‘ëª© í˜„ìƒ ê°ì§€
- ì•„í‚¤í…ì²˜ íŒ¨í„´ ì¤€ìˆ˜ í™•ì¸
- ì˜ì¡´ì„±(dependency) ë¶„ì„ ë° ì˜í–¥ë„ í‰ê°€
- ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ë¡œë¶€í„° ì¬ì‚¬ìš©ì„±(reusability) ì œì•ˆ

## Usage

```bash
/review [options] [path]
```

### ì˜µì…˜

| ì˜µì…˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|--------|-------------|---------|
| `--staged` | ìŠ¤í…Œì´ì§•ëœ íŒŒì¼ë§Œ ë¦¬ë·° | `false` |
| `--adv` | ê³ ê¸‰ ë¦¬ë·° (ë³´ì•ˆ + ì„±ëŠ¥) | `false` |
| `--arch` | ì•„í‚¤í…ì²˜ ì¤€ìˆ˜ í™•ì¸ | `false` |
| `[path]` | íŠ¹ì • íŒŒì¼ ë˜ëŠ” ë””ë ‰í† ë¦¬ | í˜„ì¬ ë””ë ‰í† ë¦¬ |

### ê¸°ë³¸ ëª…ë ¹ì–´

```bash
/review                  # ëª¨ë“  ë³€ê²½ì‚¬í•­ ë¦¬ë·°
/review src/            # íŠ¹ì • ë””ë ‰í† ë¦¬ ë¦¬ë·°
/review --staged        # ìŠ¤í…Œì´ì§•ëœ íŒŒì¼ë§Œ ë¦¬ë·°
/review --adv           # ì‹¬ì¸µ ë³´ì•ˆ/ì„±ëŠ¥ ë¶„ì„
/review --arch          # ì•„í‚¤í…ì²˜ ê²€ì¦
```

## Examples

### Example 1: Basic Review

```bash
/review src/auth/login.ts
```

**Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     Code Review Report                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ File: src/auth/login.ts
ğŸ“Š Quality Score: 85/100

âœ… Strengths:
  - Clear function separation
  - Proper error handling
  - Type safety with TypeScript

âš ï¸  Issues Found:

1. [MEDIUM] Missing input validation
   Line 45: user.password
   â†’ Add validation before processing user input

2. [LOW] Inconsistent naming
   Line 23: getUserData vs get_user_session
   â†’ Use consistent camelCase naming

ğŸ’¡ Suggestions:
  - Consider using existing auth/validator.ts
  - Add unit tests for edge cases
```

### Example 2: Advanced Security Review

```bash
/review --adv src/api/
```

**Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Advanced Security & Performance      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”’ Security Scan (OWASP Top 10)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âŒ [HIGH] SQL Injection Risk
   File: api/users.ts:67
   Issue: Direct string concatenation in query
   Fix: Use parameterized queries

âš ï¸  [MEDIUM] XSS Vulnerability
   File: api/comments.ts:34
   Issue: Unsanitized user input in response
   Fix: Use DOMPurify or similar sanitizer

âš¡ Performance Analysis
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  [MEDIUM] N+1 Query Problem
   File: api/posts.ts:89
   Impact: 50+ DB queries for single request
   Fix: Use JOIN or eager loading

ğŸ“Š Summary
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Security Issues:   2 high, 1 medium
Performance:       1 medium, 3 low
Overall Score:     68/100
```

### Example 3: Architecture Compliance

```bash
/review --arch
```

**Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Architecture Compliance Check        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ—  Detected: Feature-Sliced Design (FSD)

âœ… Compliant:
  - features/auth follows FSD structure
  - Proper layer separation (ui â†’ model â†’ api)
  - No forbidden cross-slice imports

âŒ Violations:

1. features/posts/ui â†’ features/user/model
   â†’ Shared logic should move to entities/

2. widgets/header â†’ features/auth/api
   â†’ Widgets shouldn't import feature internals

ğŸ“‹ Recommendations:
  - Extract shared user logic to entities/user
  - Use public API from features/auth/index.ts
```

## Implementation

### ì•„í‚¤í…ì²˜(Architecture)

**reviewer-unified** ì—ì´ì „íŠ¸(agent)ë¥¼ ì‚¬ìš©í•˜ë©°, ë‹¤ìŒì„ ê²°í•©í•©ë‹ˆë‹¤:
- ì½”ë“œ í’ˆì§ˆ ë¶„ì„
- ë³´ì•ˆ ìŠ¤ìº” (OWASP Top 10)
- ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§
- ì˜í–¥ë„ ë¶„ì„

### ì˜ì¡´ì„±(Dependencies)

**í•„ìˆ˜:**
- reviewer-unified ì—ì´ì „íŠ¸
- ì½”ë“œ ë¶„ì„ì„ ìœ„í•œ Grep/Read ë„êµ¬

**ì„ íƒ:**
- ì•„í‚¤í…ì²˜ ì„¤ì •: `.specify/config/architecture.json`
- í’ˆì§ˆ ê²Œì´íŠ¸(quality gate): `workflow-gates.json`
- ì˜ì¡´ì„± ìŠ¤ìº”ì„ ìœ„í•œ npm audit

### ì›Œí¬í”Œë¡œìš° ë‹¨ê³„

1. **ë²”ìœ„ ê°ì§€**
   - ë¦¬ë·°í•  íŒŒì¼ ê²°ì • (staged, path, ë˜ëŠ” ì „ì²´)
   - ì•„í‚¤í…ì²˜ ì„¤ì • ì½ê¸°
   - í’ˆì§ˆ ê²Œì´íŠ¸ ì„ê³„ê°’ ë¡œë“œ

2. **ë¶„ì„**
   - **ê¸°ë³¸**: êµ¬ë¬¸, ë„¤ì´ë°, êµ¬ì¡°
   - **ê³ ê¸‰**: ë³´ì•ˆ ì·¨ì•½ì , ì„±ëŠ¥ ì´ìŠˆ
   - **ì•„í‚¤í…ì²˜**: íŒ¨í„´ ì¤€ìˆ˜, ì˜ì¡´ì„± ê·œì¹™

3. **ì ìˆ˜ ì‚°ì •**
   - í’ˆì§ˆ ì ìˆ˜ ê³„ì‚° (0-100)
   - ì¹˜ëª…ì /ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ ì´ìŠˆ ì‹ë³„
   - í’ˆì§ˆ ê²Œì´íŠ¸ì™€ ë¹„êµ

4. **ë¦¬í¬íŠ¸ ìƒì„±**
   - ì‹¬ê°ë„ ìˆ˜ì¤€ë³„ë¡œ ê²°ê³¼ í¬ë§·
   - êµ¬ì²´ì ì¸ ë¼ì¸ ë²ˆí˜¸ì™€ ìˆ˜ì • ë°©ë²• ì œê³µ
   - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ì¡´ íŒ¨í„´ ì œì•ˆ

### ê´€ë ¨ ë¦¬ì†ŒìŠ¤

- **ì—ì´ì „íŠ¸**: reviewer-unified.md
- **ìŠ¤í‚¬**: reusability-enforcer, dependency-tracer
- **ì„¤ì •**: workflow-gates.json

## í”„ë¡œì„¸ìŠ¤ íë¦„

```
1. ì¸ì íŒŒì‹±
   â”œâ”€ --staged â†’ ìŠ¤í…Œì´ì§•ëœ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
   â”œâ”€ --adv    â†’ ë³´ì•ˆ/ì„±ëŠ¥ ìŠ¤ìº” í™œì„±í™”
   â”œâ”€ --arch   â†’ ì•„í‚¤í…ì²˜ ê²€ì¦ í™œì„±í™”
   â””â”€ [path]   â†’ íŠ¹ì • ê²½ë¡œ ìŠ¤ìº”

2. ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ
   â”œâ”€ ì•„í‚¤í…ì²˜ ì„¤ì • ì½ê¸°
   â”œâ”€ í’ˆì§ˆ ê²Œì´íŠ¸ ë¡œë“œ
   â””â”€ ê¸°ì¡´ íŒ¨í„´ ìŠ¤ìº”

3. ë¦¬ë·° ì‹¤í–‰
   â”œâ”€ ê¸°ë³¸: êµ¬ë¬¸, ë„¤ì´ë°, êµ¬ì¡°
   â”œâ”€ ë³´ì•ˆ: OWASP Top 10 ì²´í¬
   â”œâ”€ ì„±ëŠ¥: ë³‘ëª© í˜„ìƒ ê°ì§€
   â””â”€ ì•„í‚¤í…ì²˜: íŒ¨í„´ ì¤€ìˆ˜ í™•ì¸

4. ë¦¬í¬íŠ¸ ìƒì„±
   â”œâ”€ ì‹¬ê°ë„ë³„ë¡œ ë¶„ë¥˜
   â”œâ”€ ë¼ì¸ ë²ˆí˜¸ ë° ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€
   â”œâ”€ ìˆ˜ì • ë°©ë²• ì œì•ˆ
   â””â”€ í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°
```

## ëª¨ë¸ ì„ íƒ ë¡œì§

- **ê¸°ë³¸ ë¦¬ë·°**: ë¹ ë¥¸ ë¶„ì„ì„ ìœ„í•´ `haiku` ì‚¬ìš©
- **ê³ ê¸‰ ë¦¬ë·°**: ì‹¬ì¸µ ë³´ì•ˆ/ì„±ëŠ¥ ë¶„ì„ì„ ìœ„í•´ `sonnet` ì‚¬ìš©
- **ì•„í‚¤í…ì²˜ ë¦¬ë·°**: íŒ¨í„´ ì´í•´ë¥¼ ìœ„í•´ `sonnet` ì‚¬ìš©

ë‹¤ìŒì˜ ê²½ìš° ìë™ìœ¼ë¡œ `sonnet`ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ:
- ë³´ì•ˆ ì´ìŠˆ ê°ì§€
- ë³µì¡í•œ ì•„í‚¤í…ì²˜ íŒ¨í„´
- ì„±ëŠ¥ ìµœì í™” í•„ìš”

## í†µí•© ì§€ì 

### ì›Œí¬í”Œë¡œìš°ì™€ í•¨ê»˜

```bash
# ì»¤ë°‹ ì „
/review --staged
/commit

# ê¸°ëŠ¥ ê°œë°œ ì¤‘
/major "new feature"
# ... êµ¬í˜„ ...
/review --adv     # PR ì „ ì‹¬ì¸µ ë¦¬ë·°
/pr
```

### í’ˆì§ˆ ê²Œì´íŠ¸ì™€ í•¨ê»˜

`workflow-gates.json`ì˜ ì„ê³„ê°’ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤:
- ì½”ë“œ í’ˆì§ˆ: 80% ì´ìƒ
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€: 80% ì´ìƒ
- ë³´ì•ˆ: ë†’ìŒ/ì¹˜ëª…ì  ì´ìŠˆ ì—†ìŒ
- ì„±ëŠ¥: ì°¨ë‹¨ ì´ìŠˆ ì—†ìŒ

### ì•„í‚¤í…ì²˜ ê²€ì¦ê³¼ í•¨ê»˜

ë‹¤ìŒì— ëŒ€í•œ ê·œì¹™ì„ ìë™ìœ¼ë¡œ ê°•ì œí•©ë‹ˆë‹¤:
- FSD (Feature-Sliced Design)
- Clean Architecture
- Hexagonal Architecture
- DDD (Domain-Driven Design)

## ì—ëŸ¬ ì²˜ë¦¬

### "No files to review"
- **ì›ì¸**: ë¹ˆ ë””ë ‰í† ë¦¬ ë˜ëŠ” ë³€ê²½ì‚¬í•­ ì—†ìŒ
- **í•´ê²°**: íŒŒì¼ ìŠ¤í…Œì´ì§• ë˜ëŠ” ìœ íš¨í•œ ê²½ë¡œ ì§€ì •

### "Architecture config not found"
- **ì›ì¸**: `.specify/config/architecture.json` íŒŒì¼ ëˆ„ë½
- **í•´ê²°**: `/start` ì‹¤í–‰ìœ¼ë¡œ ì´ˆê¸°í™” ë˜ëŠ” ìˆ˜ë™ ìƒì„±

### "Quality gate failed"
- **ì›ì¸**: ì„ê³„ê°’ ì´í•˜ì˜ ì ìˆ˜
- **í•´ê²°**: ë†’ìŒ/ì¹˜ëª…ì  ì´ìŠˆë¥¼ ë¨¼ì € í•´ê²° í›„ ì¬ì‹œë„

## íŒ ë° ëª¨ë²” ì‚¬ë¡€

### ê° ëª¨ë“œ ì‚¬ìš© ì‹œì 

**ê¸°ë³¸ ë¦¬ë·°** (`/review`)
- ë¹ ë¥¸ êµ¬ë¬¸ ë° ìŠ¤íƒ€ì¼ ê²€ì‚¬
- ì»¤ë°‹ ì „
- ê°œë°œ ì¤‘

**ê³ ê¸‰ ë¦¬ë·°** (`/review --adv`)
- PR ìƒì„± ì „
- ë³´ì•ˆì— ë¯¼ê°í•œ ì½”ë“œ ì¶”ê°€ í›„
- ì„±ëŠ¥ ì¤‘ìš” ê¸°ëŠ¥(feature)

**ì•„í‚¤í…ì²˜ ë¦¬ë·°** (`/review --arch`)
- ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§ í›„
- ì‹ ê·œ ê°œë°œì ì˜¨ë³´ë”©
- ë¶„ê¸°ë³„ ì½”ë“œë² ì´ìŠ¤ ê±´ê°•ë„ í™•ì¸

### ìµœì ì˜ ì›Œí¬í”Œë¡œìš°

```bash
# ê°œë°œ ì‚¬ì´í´
1. ê¸°ëŠ¥ êµ¬í˜„
2. /review --staged          # ë¹ ë¥¸ í™•ì¸
3. ì´ìŠˆ ìˆ˜ì •
4. /review --adv            # ì‹¬ì¸µ ë¶„ì„
5. ë³´ì•ˆ/ì„±ëŠ¥ ë¬¸ì œ í•´ê²°
6. /commit
7. /pr
```

### ì„±ëŠ¥ íŒ

- ì „ì²´ ì½”ë“œë² ì´ìŠ¤ ëŒ€ì‹  íŠ¹ì • ê²½ë¡œ ë¦¬ë·°
- ì¦ë¶„ ë¦¬ë·°ë¥¼ ìœ„í•´ `--staged` ì‚¬ìš©
- í•„ìš”í•  ë•Œë§Œ `--arch` ì‹¤í–‰ (ëŠë¦¼)

## ê´€ë ¨ ì»¤ë§¨ë“œ

- `/commit` - ë¦¬ë·° í†µê³¼ í›„ ìë™ ì»¤ë°‹
- `/pr` - ë¦¬ë·° ì„±ê³µ í›„ PR ìƒì„±
- `/major` - ë‚´ì¥ ë¦¬ë·° ë‹¨ê³„ í¬í•¨
- `/minor` - íƒ€ê²Ÿ ë¦¬ë·° í¬í•¨

---

**Version**: 3.3.2
**Last Updated**: 2025-11-18
