# PR ìë™ ì±„ìš°ê¸° ì„¤ì •
# /pr ì»¤ë§¨ë“œê°€ ì´ ì„¤ì •ì„ ì°¸ì¡°í•˜ì—¬ í…œí”Œë¦¿ì„ ìë™ìœ¼ë¡œ ì™„ì„±í•©ë‹ˆë‹¤

# ğŸ“‹ ë³€ê²½ì‚¬í•­ ì„¹ì…˜ ìë™ ì²´í¬ ê·œì¹™
changes_detection:
  # ì»¤ë°‹ íƒ€ì…ì— ë”°ë¥¸ ì²´í¬ë°•ìŠ¤ ìë™ ì„ íƒ
  commit_type_mapping:
    feat: "ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€"
    fix: "ë²„ê·¸ ìˆ˜ì •"
    refactor: "ë¦¬íŒ©í„°ë§"
    docs: "ë¬¸ì„œ ì—…ë°ì´íŠ¸"
    test: "í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •"
    style: "ë¦¬íŒ©í„°ë§"  # ì½”ë“œ ìŠ¤íƒ€ì¼ ë³€ê²½ë„ ë¦¬íŒ©í„°ë§ìœ¼ë¡œ ë¶„ë¥˜
    perf: "ë¦¬íŒ©í„°ë§"   # ì„±ëŠ¥ ê°œì„ ë„ ë¦¬íŒ©í„°ë§ìœ¼ë¡œ ë¶„ë¥˜
    chore: null  # ì²´í¬ ì•ˆí•¨
    build: null
    ci: null

# ğŸ¯ ì‘ì—… ë‚´ìš© ì„¹ì…˜ ìë™ ìƒì„±
description_generation:
  sources:
    # ë°ì´í„° ì†ŒìŠ¤ ìš°ì„ ìˆœìœ„ (ìœ„ì—ì„œë¶€í„° ìˆœì„œëŒ€ë¡œ ì‹œë„)
    - type: spec_file
      path: .specify/spec.md
      sections: [Overview, Summary]
      priority: 1

    - type: git_commits
      format: grouped_by_type  # feat, fix, refactor ë“±ìœ¼ë¡œ ê·¸ë£¹í™”
      include_breaking_changes: true
      priority: 2

    - type: plan_file
      path: .specify/plan.md
      sections: [Implementation, Core Features]
      priority: 3

  # ì¶œë ¥ í¬ë§·
  template: |
    {{spec_overview}}

    **ì£¼ìš” ë³€ê²½ì‚¬í•­**:
    {{#each commits_by_type}}
    - {{this}}
    {{/each}}

    {{#if breaking_changes}}
    **âš ï¸ Breaking Changes**:
    {{#each breaking_changes}}
    - {{this}}
    {{/each}}
    {{/if}}

# ğŸ§ª í…ŒìŠ¤íŠ¸ ì„¹ì…˜ ìë™ ìƒì„±
test_generation:
  sources:
    # tasks.mdì˜ Verification ì²´í¬ë¦¬ìŠ¤íŠ¸
    - type: tasks_verification
      path: .specify/tasks.md
      section: Verification
      convert_to_checkbox: true

    # í…ŒìŠ¤íŠ¸ íŒŒì¼ ë³€ê²½ ê°ì§€
    - type: git_diff
      patterns:
        - "*.test.ts"
        - "*.test.tsx"
        - "*.spec.ts"
        - "*.spec.tsx"
        - "__tests__/**"
      auto_check: true  # í…ŒìŠ¤íŠ¸ íŒŒì¼ ë³€ê²½ ì‹œ ìë™ ì²´í¬

  # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼ í¬í•¨ ì—¬ë¶€ (optional)
  include_test_results:
    enabled: false  # ê¸°ë³¸ê°’ false, /pr --with-testsë¡œ í™œì„±í™” ê°€ëŠ¥
    commands:
      - yarn test
      - yarn type-check

# ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ì„¹ì…˜ ì²˜ë¦¬
screenshots:
  # UI ë³€ê²½ ê°ì§€
  ui_change_detection:
    file_extensions:
      - .tsx
      - .jsx
      - .vue
      - .html
      - .css
      - .scss
      - .sass
      - .styled.ts

    # UI ë³€ê²½ì´ ì—†ìœ¼ë©´ ì´ ì„¹ì…˜ ì œê±°
    remove_if_no_change: true

    # UI ë³€ê²½ì´ ìˆìœ¼ë©´ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€
    placeholder_message: |
      <!-- âš ï¸ UI ë³€ê²½ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ê²½ ì „í›„ ìŠ¤í¬ë¦°ìƒ·ì„ ì¶”ê°€í•´ì£¼ì„¸ìš” -->
      <!-- ì¶”ì²œ: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ -->

# ğŸ“š ì°¸ê³  ìë£Œ ì„¹ì…˜ ìë™ ìƒì„±
references_generation:
  sources:
    # 1. ì»¤ë°‹ ë©”ì‹œì§€ì—ì„œ ì´ìŠˆ ë²ˆí˜¸ ì¶”ì¶œ
    - type: commit_messages
      patterns:
        - "#(\\d+)"  # #123 í˜•ì‹
        - "closes #(\\d+)"
        - "fixes #(\\d+)"
        - "resolves #(\\d+)"
      format: "Closes #{{issue_number}}"

    # 2. spec.mdì˜ Research ë§í¬
    - type: spec_file
      path: .specify/spec.md
      sections: [Research, References, Related Work]

    # 3. Notion ë§í¬ ìë™ ê°ì§€
    - type: commit_messages
      patterns:
        - "(https://www\\.notion\\.so/[^\\s]+)"
      format: "Notion: {{url}}"

    # 4. spec/plan/tasks íŒŒì¼ ë§í¬
    - type: spec_files
      auto_link: true
      format: |
        - Spec: [.specify/spec.md](.specify/spec.md)
        - Plan: [.specify/plan.md](.specify/plan.md)
        - Tasks: [.specify/tasks.md](.specify/tasks.md)

# âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ ìë™ ì²´í¬
checklist_validation:
  items:
    - name: "ì½”ë”© ì»¨ë²¤ì…˜ ì¤€ìˆ˜"
      validation:
        command: yarn type-check
        auto_check_on_success: true

    - name: "í…ŒìŠ¤íŠ¸ í†µê³¼"
      validation:
        command: yarn test
        auto_check_on_success: true

    - name: "ë¬¸ì„œ ì—…ë°ì´íŠ¸"
      validation:
        type: git_diff
        patterns: ["*.md", "docs/**"]
        auto_check_if_changed: true

    - name: "ì„±ëŠ¥ ì˜í–¥ë„ ê²€í† "
      validation:
        type: optional  # í•­ìƒ ì²´í¬ ì•ˆí•¨, ìˆ˜ë™ í™•ì¸ í•„ìš”
        note: "ì„±ëŠ¥ì— ì˜í–¥ì„ ì£¼ëŠ” ë³€ê²½ì´ ìˆë‹¤ë©´ ìˆ˜ë™ìœ¼ë¡œ ì²´í¬í•˜ì„¸ìš”"

# PR ìƒì„± ê¸°ë³¸ ì˜µì…˜
pr_options:
  # ê¸°ë³¸ ë² ì´ìŠ¤ ë¸Œëœì¹˜
  default_base_branch: main

  # PR ì œëª© ìë™ ìƒì„±
  title_generation:
    # ì»¤ë°‹ì´ 1ê°œë©´ ì»¤ë°‹ ë©”ì‹œì§€ ì‚¬ìš©
    single_commit: use_commit_message

    # ì»¤ë°‹ì´ ì—¬ëŸ¬ ê°œë©´ ìë™ ìš”ì•½
    multiple_commits:
      format: "{{primary_type}}({{scope}}): {{summary}}"
      # primary_type: ê°€ì¥ ë§ì€ ì»¤ë°‹ íƒ€ì…
      # scope: ê³µí†µ ìŠ¤ì½”í”„ ë˜ëŠ” íŒŒì¼ ê²½ë¡œì—ì„œ ì¶”ì¶œ
      # summary: GPTê°€ ì»¤ë°‹ë“¤ì„ ìš”ì•½

  # ìë™ ë¼ë²¨ ì¶”ê°€ (GitHub labels)
  auto_labels:
    feat: [feature, enhancement]
    fix: [bug, fix]
    refactor: [refactor, code-quality]
    docs: [documentation]
    test: [testing]
    perf: [performance]
    breaking: [breaking-change]

  # ë¦¬ë·°ì–´ ìë™ í• ë‹¹ (optional)
  auto_reviewers:
    enabled: false  # ê¸°ë³¸ê°’ false, /pr --auto-assignìœ¼ë¡œ í™œì„±í™”
    rules:
      - path_pattern: "src/features/**"
        reviewers: []  # íŒ€ì› GitHub username
      - path_pattern: "src/shared/**"
        reviewers: []

# Footer ì¶”ê°€
footer:
  enabled: true
  template: |

    ---
    ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

    Co-Authored-By: Claude <noreply@anthropic.com>
