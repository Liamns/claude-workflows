# ğŸ¯ Model Optimization & Context7 Integration Guide

Claude Workflows v2.4.0 ì§€ëŠ¥í˜• ëª¨ë¸ ìµœì í™” ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“š ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ëª¨ë¸ ì „ëµ](#ëª¨ë¸-ì „ëµ)
3. [Context7 í†µí•©](#context7-í†µí•©)
4. [ì„¤ì • ë°©ë²•](#ì„¤ì •-ë°©ë²•)
5. [ì‚¬ìš© ì˜ˆì‹œ](#ì‚¬ìš©-ì˜ˆì‹œ)
6. [ë¹„ìš© ìµœì í™”](#ë¹„ìš©-ìµœì í™”)
7. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

## ê°œìš”

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```yaml
ëª¨ë¸ ê³„ì¸µ:
  Opus: ìµœê³  í’ˆì§ˆ, ë³µì¡í•œ ê¸°íš ë° ë¶„ì„
  Sonnet: ê· í˜•ì¡íŒ ì„±ëŠ¥, ì¼ë°˜ì ì¸ ì‘ì—…
  Haiku: ë¹ ë¥¸ ì²˜ë¦¬, ê°„ë‹¨í•œ ì‘ì—…

Context7:
  ì—­í• : í”„ë¡œì íŠ¸ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ë¡œë”©
  í™œìš©: Plan ë‹¨ê³„, ì¬ì‚¬ìš©ì„± ê²€ìƒ‰
  í† í°: ìµœëŒ€ 3,000 (ì„ íƒì  ë¡œë”©)
```

### í•µì‹¬ íŠ¹ì§•

- **ìë™ ëª¨ë¸ ì„ íƒ**: ì‘ì—… ë³µì¡ë„ì— ë”°ë¥¸ ìµœì  ëª¨ë¸ ìë™ ì„ íƒ
- **ì¿¼í„° ê´€ë¦¬**: Opus í•œë„ ë„ë‹¬ ì‹œ ìë™ í´ë°±
- **Context7 í†µí•©**: í•„ìš” ì‹œ í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ ìë™ ë¡œë“œ
- **ë¹„ìš© ìµœì í™”**: í† í° ì‚¬ìš©ëŸ‰ 40-50% ì ˆê°

## ëª¨ë¸ ì „ëµ

### ì›Œí¬í”Œë¡œìš°ë³„ ê¸°ë³¸ ëª¨ë¸ (v2.4.0)

| ì›Œí¬í”Œë¡œìš° | ê¸°ë³¸ ëª¨ë¸ | ì—…ê·¸ë ˆì´ë“œ ì¡°ê±´ | Context7 | ì—ì´ì „íŠ¸ |
|-----------|----------|----------------|----------|----------|
| **/major** | Sonnet | ë³µì¡ë„ > 12 â†’ Opus | âœ… (ë³µì¡ë„ > 10) | architect, reviewer, implementer, documenter |
| **/minor** | Sonnet | ë‹¨ìˆœ ìˆ˜ì • â†’ Haiku | âŒ | implementer, reviewer, documenter |
| **/micro** | Haiku | - | âŒ | implementer, documenter |
| **/test** | Sonnet | - | âŒ | implementer |
| **/review** | Sonnet | ì‹¬ì¸µ ë¶„ì„ â†’ Opus | âœ… (--adv ì˜µì…˜) | reviewer |

**v2.4.0 ë³€ê²½ì‚¬í•­:**
- Major ì›Œí¬í”Œë¡œìš° í†µí•© (6ê°œ ë‹¨ê³„ â†’ 1ê°œ ëª…ë ¹ì–´)
- ì—ì´ì „íŠ¸ í†µí•© (11ê°œ â†’ 6ê°œ)
- ì§ˆë¬¸ ìˆ˜ 80% ê°ì†Œ (10ê°œ â†’ 2ê°œ)

### ë³µì¡ë„ ì ìˆ˜ ê³„ì‚°

```yaml
ë³µì¡ë„ ìš”ì†Œ:
  íŒŒì¼_ê°œìˆ˜:
    1-3ê°œ: +1ì 
    4-10ê°œ: +3ì 
    11ê°œ ì´ìƒ: +5ì 

  ì•„í‚¤í…ì²˜_ì˜í–¥:
    ê¸°ì¡´ íŒ¨í„´: +1ì 
    ìƒˆ íŒ¨í„´: +4ì 
    ì•„í‚¤í…ì²˜ ë³€ê²½: +6ì 

  Breaking_Changes:
    Public API: +5ì 
    í´ë” êµ¬ì¡°: +4ì 
    Import ê²½ë¡œ: +3ì 

  Cross_Cutting:
    ì—¬ëŸ¬ ë ˆì´ì–´: +4ì 
    ì—¬ëŸ¬ ëª¨ë“ˆ: +3ì 
    ë‹¨ì¼ ëª¨ë“ˆ: +1ì 

ëª¨ë¸ ì„ íƒ:
  0-5ì : Haiku
  6-11ì : Sonnet
  12ì  ì´ìƒ: Opus
```

## Context7 í†µí•©

### í™œì„±í™” ì¡°ê±´

Context7ì€ ë‹¤ìŒ ì¡°ê±´ì—ì„œ ìë™ í™œì„±í™”ë©ë‹ˆë‹¤:

```yaml
ìë™ í™œì„±í™”:
  - ë³µì¡ë„ ì ìˆ˜ > 10
  - feature_type: "cross_cutting"
  - ì•„í‚¤í…ì²˜ ë³€ê²½ ê°ì§€
  - ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

ìˆ˜ë™ í™œì„±í™”:
  - í”Œë˜ê·¸: --use-context7
  - ëª…ë ¹ì–´: /enable-context7
```

### ì„ íƒì  ë¡œë”© ì „ëµ

```yaml
Context7 ë¡œë”© êµ¬ì„± (ìµœëŒ€ 3,000 í† í°):
  í”„ë¡œì íŠ¸ êµ¬ì¡°: 500 í† í°
    - src/ ë””ë ‰í† ë¦¬ êµ¬ì¡°
    - ì•„í‚¤í…ì²˜ íŒ¨í„´ íŒŒì•…

  ê´€ë ¨ ì»´í¬ë„ŒíŠ¸: 1,500 í† í°
    - features/*/api/*
    - shared/hooks/*
    - ìœ ì‚¬ êµ¬í˜„ íŒ¨í„´

  ê¸°ì¡´ íŒ¨í„´: 1,500 í† í°
    - ì¬ì‚¬ìš© ê°€ëŠ¥ ëª¨ë“ˆ
    - ê³µí†µ ìœ í‹¸ë¦¬í‹°

  ì•„í‚¤í…ì²˜ ê·œì¹™: 500 í† í°
    - constitution.md
    - architecture.json
```

### í†µí•©ëœ Skills/Agents (v2.4.0)

| ì»´í¬ë„ŒíŠ¸ | Context7 ì‚¬ìš© | í† í° ì˜ˆì‚° | ìš©ë„ |
|----------|-------------|----------|------|
| **reusability-enforcer** | âœ… | 2,000 | ì¬ì‚¬ìš© ëª¨ë“ˆ ê²€ìƒ‰ |
| **Plan ì—ì´ì „íŠ¸** | âœ… | 3,000 | ê¸°ìˆ  ê³„íš ìˆ˜ë¦½ (Major ì›Œí¬í”Œë¡œìš° ë‚´) |
| **api-integration** | âœ… | 1,500 | API íŒ¨í„´ ê²€ìƒ‰ |
| **fsd-component-creation** | âœ… | 1,000 | FSD ì»´í¬ë„ŒíŠ¸ í…œí”Œë¦¿ |
| **reviewer-unified** | âœ… | 2,500 | ì˜í–¥ë„ ë¶„ì„ (--adv ì˜µì…˜) |

## ì„¤ì • ë°©ë²•

### 1. ì‚¬ìš©ì ì „ëµ ì„ íƒ

`.claude/config/user-preferences.yaml` í¸ì§‘:

```yaml
model_preferences:
  default_strategy: "balanced"  # quality, balanced, aggressive ì¤‘ ì„ íƒ
```

#### ì „ëµë³„ íŠ¹ì§•

**Quality (í’ˆì§ˆ ìš°ì„ )**
- ëª¨ë“  ì¤‘ìš” ë‹¨ê³„ì— Opus ì‚¬ìš©
- Context7 í•­ìƒ í™œì„±í™”
- í† í° ì˜ˆì‚°: ë¬´ì œí•œ
- ì˜ˆìƒ ë¹„ìš©: ë†’ìŒ

**Balanced (ê· í˜•, ê¶Œì¥)**
- Specify/Planë§Œ Opus
- Context7 ì¡°ê±´ë¶€ í™œì„±í™”
- í† í° ì˜ˆì‚°: 10,000/ë‹¨ê³„
- ì˜ˆìƒ ë¹„ìš©: ì¤‘ê°„

**Aggressive (ë¹„ìš© ìµœì í™”)**
- ëª¨ë“  ë‹¨ê³„ Sonnet/Haiku
- Context7 ë¹„í™œì„±í™”
- í† í° ì˜ˆì‚°: 5,000/ë‹¨ê³„
- ì˜ˆìƒ ë¹„ìš©: ë‚®ìŒ

### 2. Context7 ì„¤ì •

```yaml
context7_preferences:
  default_mode: "auto"  # auto, manual, never
  max_tokens: 3000
  auto_activation_threshold: 10  # ë³µì¡ë„ ì ìˆ˜
  loading_strategy: "selective"  # selective, comprehensive
```

### 3. ì•Œë¦¼ ì„¤ì •

```yaml
notifications:
  model_switches:
    enabled: true
    verbose: false  # ìƒì„¸ ì •ë³´ í‘œì‹œ

  context7_usage:
    enabled: true
    show_token_count: true

  cost_tracking:
    enabled: true
    show_cumulative: true
```

## ì‚¬ìš© ì˜ˆì‹œ

### 1. ê¸°ë³¸ ì‚¬ìš© (v2.4.0 í†µí•© ì›Œí¬í”Œë¡œìš°)

```bash
# ìë™ ëª¨ë¸ ì„ íƒ ë° Context7
/major

# ì¶œë ¥:
â„¹ï¸ Using Sonnet for Major workflow (balanced mode)
ğŸ” Context7 activated (complexity: 14)
ğŸ“Š 2ê°œ ì§ˆë¬¸ë§Œìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ í™•ì¸ ì™„ë£Œ
â„¹ï¸ architect-unified, implementer-unified ì—ì´ì „íŠ¸ í™œì„±í™”
```

### 2. ëª¨ë¸ ê°•ì œ ì§€ì •

```bash
# íŠ¹ì • ëª¨ë¸ ê°•ì œ ì‚¬ìš©
/major --model=opus

# Opus ìš°ì„  ì‚¬ìš© ìš”ì²­
/major --prefer-opus

# Context7 ê°•ì œ í™œì„±í™”
/major --use-context7
```

### 3. ë¹„ìš© ìµœì í™” ëª¨ë“œ

```bash
# ë¹„ìš© ìµœì í™” ìš°ì„ 
/major --optimize-cost

# Context7 ë¹„í™œì„±í™”
/major --no-context7

# Haiku ì‚¬ìš© (ë§¤ìš° ê°„ë‹¨í•œ ì‘ì—…)
/micro
# â†’ íƒ€ì´í¬ ìˆ˜ì •, ìŠ¤íƒ€ì¼ ë³€ê²½ ë“±
```

### 4. Minor ì›Œí¬í”Œë¡œìš° ìë™ ë‹¤ìš´ê·¸ë ˆì´ë“œ

```bash
/minor fix-button-color

# ìë™ ê°ì§€:
â„¹ï¸ Using Haiku for simple fix (cost optimization)
  - Change scope: 3 lines in 1 file
  - Type: style change
```

## ë¹„ìš© ìµœì í™”

### í† í° ì‚¬ìš©ëŸ‰ ë¹„êµ

| ì›Œí¬í”Œë¡œìš° | ê¸°ì¡´ (All Opus) | ìµœì í™” í›„ | ì ˆê°ë¥  |
|-----------|----------------|-----------|--------|
| Major (ë³µì¡) | 50,000 | 15,000 | 70% |
| Major (ë‹¨ìˆœ) | 30,000 | 8,000 | 73% |
| Minor | 20,000 | 5,000 | 75% |
| Micro | 10,000 | 1,500 | 85% |

### ë¹„ìš© ì¶”ì 

```bash
# ì¼ì¼ ì‚¬ìš©ëŸ‰ í™•ì¸
cat .claude/metrics/daily/$(date +%Y-%m-%d).json

# ì¶œë ¥ ì˜ˆì‹œ:
{
  "opus_requests": 5,
  "sonnet_requests": 23,
  "haiku_requests": 45,
  "total_tokens": 125000,
  "estimated_cost": "$8.50",
  "context7_activations": 3
}
```

### ìµœì í™” íŒ

1. **Opus ì ˆì•½**
   - Specify/Plan ë‹¨ê³„ë§Œ ì‚¬ìš©
   - ë³µì¡ë„ 12ì  ì´ìƒë§Œ í™œì„±í™”
   - ì¼ì¼ ì¿¼í„° ê´€ë¦¬

2. **Context7 íš¨ìœ¨í™”**
   - ì„ íƒì  ë¡œë”© ì‚¬ìš©
   - ìºì‹œ í™œìš© (30ë¶„ ìœ ì§€)
   - ìˆ˜ë™ ê²€ìƒ‰ í´ë°± ì¤€ë¹„

3. **Haiku í™œìš©**
   - íƒ€ì´í¬ ìˆ˜ì •
   - ìŠ¤íƒ€ì¼ ë³€ê²½
   - 10ì¤„ ì´í•˜ ìˆ˜ì •

## ë¬¸ì œ í•´ê²°

### Opus ì¿¼í„° ì´ˆê³¼

**ì¦ìƒ:**
```
âš ï¸ Opus quota exhausted, using Sonnet with enhanced mode
```

**í•´ê²°ì±…:**
1. 5ë¶„ í›„ ìë™ ì¬ì‹œë„
2. Sonnet + ê°•í™” ëª¨ë“œ ì‚¬ìš©
3. ìˆ˜ë™ìœ¼ë¡œ `--model=sonnet` ì§€ì •

### Context7 ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ:**
```
âŒ Context7 connection failed
â†©ï¸ Falling back to manual search
```

**í•´ê²°ì±…:**
1. ìˆ˜ë™ ê²€ìƒ‰ ëª¨ë“œë¡œ ìë™ ì „í™˜
2. Grep/Glob ë„êµ¬ ì‚¬ìš©
3. `--no-context7` í”Œë˜ê·¸ë¡œ ë¹„í™œì„±í™”

### í† í° í•œë„ ì´ˆê³¼

**ì¦ìƒ:**
```
âš ï¸ Context7 token limit reached (3000/3000)
```

**í•´ê²°ì±…:**
1. ë¶€ë¶„ ê²°ê³¼ë¡œ ì§„í–‰
2. ë¡œë”© ë²”ìœ„ ì¶•ì†Œ
3. ì„ íƒì  ë¡œë”© ì „ëµ ì¡°ì •

### ëª¨ë¸ ì„±ëŠ¥ ì €í•˜

**ì¦ìƒ:**
- Haiku/Sonnet ì‚¬ìš© ì‹œ í’ˆì§ˆ ì €í•˜

**í•´ê²°ì±…:**
1. `--prefer-opus` í”Œë˜ê·¸ ì‚¬ìš©
2. ì‚¬ìš©ì ì „ëµì„ "quality"ë¡œ ë³€ê²½
3. ë³µì¡í•œ ì‘ì—…ì€ Major ì›Œí¬í”Œë¡œìš° ì‚¬ìš©

## ëª¨ë‹ˆí„°ë§

### ë©”íŠ¸ë¦­ ìˆ˜ì§‘

```yaml
# .claude/config/user-preferences.yaml
advanced:
  metrics:
    enabled: true
    track_model_usage: true
    track_token_consumption: true
    track_cost_per_workflow: true
    export_path: ".claude/metrics/"
```

### ëŒ€ì‹œë³´ë“œ í™•ì¸

```bash
# ëª¨ë¸ë³„ ì‚¬ìš© í†µê³„
grep "model_usage" .claude/metrics/daily/*.json | jq

# Context7 í™œì„±í™” ë¹ˆë„
grep "context7" .claude/metrics/daily/*.json | wc -l

# í‰ê·  í† í° ì‚¬ìš©ëŸ‰
jq '.total_tokens' .claude/metrics/daily/*.json | awk '{sum+=$1} END {print sum/NR}'
```

## ê¶Œì¥ ì‚¬í•­

### DO âœ…

- Major ì›Œí¬í”Œë¡œìš°ëŠ” Opusë¡œ ì‹œì‘
- Context7ì€ ë³µì¡í•œ ì‘ì—…ë§Œ í™œì„±í™”
- ê°„ë‹¨í•œ ìˆ˜ì •ì€ Haiku í™œìš©
- ìºì‹œë¥¼ í†µí•œ ì¤‘ë³µ ë¡œë”© ë°©ì§€
- ì •ê¸°ì ì¸ ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§

### DON'T âŒ

- ëª¨ë“  ì‘ì—…ì— Opus ê°•ì œ ì‚¬ìš©
- Context7 ìƒì‹œ í™œì„±í™”
- ìºì‹œ ë¬´íš¨í™” ë¹ˆë²ˆíˆ ìˆ˜í–‰
- í† í° í•œë„ ë¬´ì‹œ
- í´ë°± ë©”ì»¤ë‹ˆì¦˜ ë¹„í™œì„±í™”

## ì—…ë°ì´íŠ¸ ë‚´ì—­

### v2.4.0 (2025-11-07)
- Major ì›Œí¬í”Œë¡œìš° í†µí•© (6ê°œ ë‹¨ê³„ â†’ 1ê°œ ëª…ë ¹ì–´)
- ì—ì´ì „íŠ¸ í†µí•© (11ê°œ â†’ 6ê°œ)
- ì§ˆë¬¸ ìˆ˜ 80% ê°ì†Œ (10ê°œ â†’ 2ê°œ)
- í†µí•© ì—ì´ì „íŠ¸ ëª¨ë¸ ìµœì í™”

### v2.3.0 (2025-01-07)
- ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ ì¶”ê°€
- Multi-Architecture ì§€ì›

### v2.1.0 (2024-01-07)
- ëª¨ë¸ ë¼ìš°í„° ì‹œìŠ¤í…œ ë„ì…
- Context7 ì„ íƒì  ë¡œë”©
- ì¿¼í„° ì¸ì‹ í´ë°±
- ì‚¬ìš©ì ì „ëµ í”„ë¡œíŒŒì¼

### í–¥í›„ ê³„íš
- ìë™ í•™ìŠµ ê¸°ë°˜ ëª¨ë¸ ì„ íƒ
- íŒ€ ê³µìœ  ì¿¼í„° ê´€ë¦¬
- ì‹¤ì‹œê°„ ë¹„ìš© ì•Œë¦¼
- A/B í…ŒìŠ¤íŠ¸ ê¸°ë°˜ ìµœì í™”

---

**v2.4.0** | í†µí•© ì›Œí¬í”Œë¡œìš° & ì—ì´ì „íŠ¸ ìµœì í™” | Made with â¤ï¸ for Claude Code