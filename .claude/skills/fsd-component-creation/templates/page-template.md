# Page 템플릿 (Team Custom: v2.1 Pages First)

Page는 라우트 핸들러로, Features를 조합하여 전체 페이지를 구성합니다.

**Team Principle**: 페이지 특화 로직은 pages에 유지 (2+ 페이지에서 재사용되지 않으면 features로 추출하지 않음)

## 파일 구조

```
pages/{page-name}/
├── model/
│   └── use{Page}Data.ts   # (선택) 페이지 특화 로직
├── api/                   # (선택) 페이지 특화 API
└── ui/
    └── {Page}Page.tsx     # 메인 페이지 컴포넌트
```

## ui/{Page}Page.tsx

```typescript
// Generated by fsd-component-creation skill (Team: Pages First)
import { Header } from '@/features/header';    // 재사용 feature
import { Footer } from '@/features/footer';    // 재사용 feature
import { {Feature}Form } from '@/features/{feature}';

export function {Page}Page() {
  // 페이지 특화 로직 (인증 체크, 라우트 파라미터 등)

  return (
    <div className="page">
      <Header />

      <main>
        {/* Features 조합 */}
        <{Feature}Form />
      </main>

      <Footer />
    </div>
  );
}
```

## 예시 1: Order List Page (Pages First)

```typescript
// pages/order-list/ui/OrderListPage.tsx
import { Header } from '@/features/header';    // 재사용 feature
import { OrderList } from '@/features/order';  // 재사용 feature
import { useOrderListData } from '../model/useOrderListData';

export function OrderListPage() {
  const { orders, filters, setFilters } = useOrderListData();

  // 페이지 특화 로직: 필터링, 정렬 (다른 페이지에서 재사용 안 됨)

  return (
    <div className="order-list-page">
      <Header />

      <main>
        {/* 페이지 특화 필터 UI */}
        <div className="filters">
          <button onClick={() => setFilters({ status: 'pending' })}>
            대기중
          </button>
          <button onClick={() => setFilters({ status: 'completed' })}>
            완료
          </button>
        </div>

        {/* 재사용 feature */}
        <OrderList data={orders} />
      </main>
    </div>
  );
}
```

## 예시 2: Dashboard Page

```typescript
// pages/dashboard/ui/DashboardPage.tsx
import { Header } from '@/features/header';
import { OrderSummary } from '@/features/order';
import { useUserStore } from '@/app/model/stores';

export function DashboardPage() {
  const user = useUserStore((state) => state.user);

  // 페이지 레벨 인증 체크
  if (!user) {
    return <div>로그인이 필요합니다.</div>;
  }

  return (
    <div className="dashboard-page">
      <Header />

      <main>
        <h1>Dashboard</h1>
        <OrderSummary userId={user.id} />
      </main>
    </div>
  );
}
```

## 예시 3: Sign Up Page

```typescript
// pages/sign-up/ui/SignUpPage.tsx
import { SignUpForm } from '@/features/auth';  // auth 도메인의 sign-up 액션
import { PolicyAgreement } from '@/features/policy';

export function SignUpPage() {
  return (
    <div className="sign-up-page">
      <header>
        <h1>회원가입</h1>
      </header>

      <main>
        <PolicyAgreement />
        <SignUpForm />
      </main>
    </div>
  );
}
```

## model/use{Page}Data.ts (페이지 특화 로직)

페이지 특화 로직이 필요한 경우 별도 훅으로 분리합니다:

```typescript
// pages/order-list/model/useOrderListData.ts
// 이 로직은 OrderListPage에서만 사용됨 (다른 페이지에서 재사용 안 됨)

import { useState, useEffect } from 'react';
import { fetchOrders } from '../api/fetchOrders';

export function useOrderListData() {
  const [orders, setOrders] = useState([]);
  const [filters, setFilters] = useState({});

  useEffect(() => {
    // 페이지 특화 데이터 fetching
    fetchOrders(filters).then(setOrders);
  }, [filters]);

  return {
    orders,
    filters,
    setFilters,
  };
}
```

## api/fetch{Page}Data.ts (페이지 특화 API)

```typescript
// pages/order-list/api/fetchOrders.ts
// 이 API 호출은 OrderListPage에서만 사용됨

export async function fetchOrders(filters: Record<string, any>) {
  // 페이지 특화 API 호출
  const response = await fetch('/api/orders', {
    method: 'POST',
    body: JSON.stringify(filters),
  });

  return response.json();
}
```

## 라우팅 설정

```typescript
// app/config/routes.tsx
import { DashboardPage } from '@/pages/dashboard';
import { SignUpPage } from '@/pages/sign-up';
import { OrderListPage } from '@/pages/order-list';

export const routes = [
  {
    path: '/dashboard',
    element: <DashboardPage />,
  },
  {
    path: '/sign-up',
    element: <SignUpPage />,
  },
  {
    path: '/orders',
    element: <OrderListPage />,
  },
];
```

## ❌ Page에서 금지된 패턴

```typescript
// ❌ 불필요한 feature 추출 (1개 페이지에서만 사용)
// pages/order-list/ui/OrderListPage.tsx
import { OrderFilter } from '@/features/order-filter';  // 금지! 1개 페이지에서만 사용되면 pages에 유지

// ❌ 복잡한 비즈니스 로직 직접 작성 (재사용되면 features로 추출)
export function Page() {
  const [data, setData] = useState([]);

  // 복잡한 주문 생성 로직 (재사용되면 features/order로)
  const createOrder = () => {
    // 복잡한 로직...
  };
}
```

## ✅ Page에서 허용된 패턴

```typescript
// ✅ Features 조합
export function Page() {
  return (
    <>
      <Header />
      <OrderList />
      <Footer />
    </>
  );
}

// ✅ 라우트 파라미터 전달
export function Page() {
  const { id } = useParams();

  return <OrderDetail orderId={id} />;
}

// ✅ 페이지 레벨 인증 체크
export function Page() {
  const { user } = useUserStore();

  if (!user) return <Navigate to="/sign-in" />;

  return <Dashboard userId={user.id} />;
}

// ✅ 페이지 특화 로직 (다른 페이지에서 재사용 안 됨)
export function OrderListPage() {
  const { orders, filters, setFilters } = useOrderListData();  // 페이지 특화 훅

  return (
    <div>
      {/* 필터 UI (OrderListPage에서만 사용) */}
      <OrderList data={orders} />
    </div>
  );
}
```

## 플랫폼별 Page 분기

```typescript
// pages/dashboard/ui/DashboardPage.tsx
import { usePlatformStore } from '@/app/model/stores';
import { MobileDashboard } from '@/features/mobile-dashboard';
import { DesktopDashboard } from '@/features/desktop-dashboard';

export function DashboardPage() {
  const platform = usePlatformStore((state) => state.platform);

  if (platform === 'app' || platform === 'mobile-web') {
    return <MobileDashboard />;
  }

  return <DesktopDashboard />;
}
```

## Pages First 판단 기준

**1개 페이지에서만 사용**:
- ✅ pages에 유지 (api, model, ui segments)
- 예: 주문 목록 페이지의 필터링 로직

**2+ 페이지에서 재사용**:
- ✅ features로 추출
- 예: Header, Footer, OrderList

**페이지 특화 로직**:
- ✅ pages에 유지
- 예: 인증 체크, 라우트 파라미터 처리, 페이지별 필터

## Page 설계 가이드라인

1. **라우트 핸들링**: React Router와 연결
2. **Features 조합**: 재사용 features를 조합
3. **Pages First**: 페이지 특화 로직은 pages에 유지
4. **플랫폼 분기**: 필요시 플랫폼별 UI 분기
5. **로딩/에러 처리**: 페이지 레벨에서 처리
