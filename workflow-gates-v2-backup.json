{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "2.0.0",
  "description": "Multi-architecture workflow quality gates configuration",

  "activeArchitecture": null,

  "architectureProfiles": {
    "frontend": {
      "fsd": {
        "name": "Feature-Sliced Design",
        "gates": {
          "structure": {
            "layerDependencies": {
              "enabled": true,
              "required": true,
              "description": "Ensure proper layer dependencies"
            },
            "sliceIsolation": {
              "enabled": true,
              "required": true,
              "description": "Slices within same layer cannot import each other"
            },
            "publicApi": {
              "enabled": true,
              "required": true,
              "description": "Each slice must have public API (index file)"
            },
            "entityPurity": {
              "enabled": true,
              "required": true,
              "description": "Entities cannot depend on features"
            }
          }
        }
      },
      "atomic": {
        "name": "Atomic Design",
        "gates": {
          "structure": {
            "atomPurity": {
              "enabled": true,
              "required": true,
              "description": "Atoms must be pure, stateless components"
            },
            "hierarchyRespect": {
              "enabled": true,
              "required": true,
              "description": "Components can only import from lower levels"
            },
            "singleResponsibility": {
              "enabled": true,
              "required": false,
              "description": "Each component has one clear purpose"
            }
          }
        }
      },
      "mvc": {
        "name": "MVC/MVP/MVVM",
        "gates": {
          "structure": {
            "separationOfConcerns": {
              "enabled": true,
              "required": true,
              "description": "Model, View, Controller clearly separated"
            },
            "unidirectionalFlow": {
              "enabled": true,
              "required": true,
              "description": "View → Controller → Model (no reverse)"
            }
          }
        }
      }
    },

    "backend": {
      "clean": {
        "name": "Clean Architecture",
        "gates": {
          "structure": {
            "dependencyInversion": {
              "enabled": true,
              "required": true,
              "description": "Depend on abstractions, not concretions"
            },
            "domainPurity": {
              "enabled": true,
              "required": true,
              "description": "Domain layer has no external dependencies"
            },
            "useCaseIndependence": {
              "enabled": true,
              "required": true,
              "description": "Use cases are independently testable"
            }
          },
          "testing": {
            "unitTestCoverage": {
              "enabled": true,
              "required": true,
              "threshold": 80,
              "description": "Domain and use case coverage > 80%"
            }
          }
        }
      },
      "hexagonal": {
        "name": "Hexagonal Architecture",
        "gates": {
          "structure": {
            "portDefinition": {
              "enabled": true,
              "required": true,
              "description": "All external dependencies defined as ports"
            },
            "adapterImplementation": {
              "enabled": true,
              "required": true,
              "description": "Adapters implement port interfaces"
            },
            "corePurity": {
              "enabled": true,
              "required": true,
              "description": "Core has no adapter dependencies"
            }
          }
        }
      },
      "ddd": {
        "name": "Domain-Driven Design",
        "gates": {
          "structure": {
            "boundedContextAutonomy": {
              "enabled": true,
              "required": true,
              "description": "Bounded contexts are autonomous"
            },
            "aggregateConsistency": {
              "enabled": true,
              "required": true,
              "description": "Maintain consistency within aggregates"
            },
            "valueObjectImmutability": {
              "enabled": true,
              "required": true,
              "description": "Value objects are immutable"
            },
            "ubiquitousLanguage": {
              "enabled": true,
              "required": false,
              "description": "Use domain terms consistently"
            }
          }
        }
      },
      "layered": {
        "name": "Layered Architecture",
        "gates": {
          "structure": {
            "layerIsolation": {
              "enabled": true,
              "required": true,
              "description": "Each layer only depends on layer below"
            },
            "dataAccessAbstraction": {
              "enabled": true,
              "required": true,
              "description": "Business layer doesn't know database details"
            }
          }
        }
      }
    },

    "neutral": {
      "none": {
        "name": "No Architecture",
        "gates": {
          "basic": {
            "syntaxCheck": {
              "enabled": true,
              "required": true,
              "description": "Code syntax is valid"
            },
            "typeCheck": {
              "enabled": true,
              "required": false,
              "description": "TypeScript type checking"
            }
          }
        }
      }
    }
  },

  "workflows": {
    "major": {
      "name": "Major (Spec-Kit)",
      "description": "신규 기능 추가, 아키텍처 변경, API 엔드포인트 추가",
      "gates": {
        "pre-implementation": {
          "architectureCompliance": {
            "enabled": true,
            "required": true,
            "description": "Verify architecture rules before implementation",
            "useProfile": true
          },
          "spec-quality": {
            "enabled": true,
            "required": true,
            "description": "spec.md 품질 검증"
          },
          "test-plan": {
            "enabled": true,
            "required": true,
            "description": "테스트 계획 수립"
          }
        },
        "during-implementation": {
          "architectureValidation": {
            "enabled": true,
            "required": true,
            "description": "Continuous architecture validation",
            "useProfile": true
          },
          "reusability-check": {
            "enabled": true,
            "required": true,
            "description": "재사용성 검사 및 패턴 일관성"
          },
          "test-first": {
            "enabled": true,
            "required": true,
            "description": "테스트 우선 개발"
          }
        },
        "post-implementation": {
          "finalArchitectureCheck": {
            "enabled": true,
            "required": true,
            "description": "Final architecture compliance check",
            "useProfile": true
          },
          "code-review": {
            "enabled": true,
            "required": true,
            "description": "자동 코드 리뷰"
          },
          "all-tests-pass": {
            "enabled": true,
            "required": true,
            "description": "전체 테스트 통과"
          }
        }
      }
    },

    "minor": {
      "name": "Minor (Lightweight)",
      "description": "버그 픽스, 기존 기능 개선, UI 스타일 변경",
      "gates": {
        "during-implementation": {
          "architectureValidation": {
            "enabled": true,
            "required": false,
            "description": "Architecture rule checking",
            "useProfile": true
          },
          "minimal-change": {
            "enabled": true,
            "required": true,
            "description": "최소 변경 원칙"
          }
        },
        "post-implementation": {
          "related-tests": {
            "enabled": true,
            "required": true,
            "description": "관련 테스트 통과"
          }
        }
      }
    },

    "micro": {
      "name": "Micro (Quick Fix)",
      "description": "타이포 수정, 주석, 로그 제거, 설정 파일",
      "gates": {
        "post-implementation": {
          "syntax-check": {
            "enabled": true,
            "required": true,
            "description": "문법 체크"
          }
        }
      }
    }
  },

  "common_gates": {
    "architecture": {
      "detection": {
        "enabled": true,
        "description": "Automatically detect project architecture if not configured"
      },
      "enforcement": {
        "enabled": true,
        "levels": {
          "strict": "All rules enforced, build fails on violation",
          "moderate": "Warnings for violations, errors for critical rules",
          "loose": "Only show warnings, no build failures"
        },
        "default": "moderate"
      }
    },
    "git": {
      "commit_message": {
        "enabled": true,
        "format": "conventional",
        "architecturePrefix": true,
        "examples": [
          "[fsd] feat: Add user authentication feature",
          "[clean] fix: Resolve dependency injection issue",
          "[atomic] style: Update Button component styles"
        ]
      }
    }
  },

  "customRules": {
    "description": "Project-specific custom rules",
    "rules": []
  },

  "override": {
    "description": "특정 상황에서 게이트 우회 가능 (신중히 사용)",
    "allowed_overrides": [
      "hotfix (프로덕션 긴급 수정)",
      "experimental (실험적 기능)",
      "prototype (프로토타입)",
      "migration (아키텍처 마이그레이션 중)"
    ],
    "require_justification": true
  }
}