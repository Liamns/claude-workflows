---
name: plan-minor
hooks:
  post: .claude/hooks/plan-minor-post.sh
---

# Plan:Minor - Minor 워크플로우 계획 단계

> **참고**: 이 명령어는 `.claude/CLAUDE.md`의 규칙을 준수합니다.

Minor 복잡도 작업(4-7점, 주로 버그 수정)의 계획 문서를 생성합니다.

## 실행 순서

1. **버그 재현 및 분석**
   - 버그 증상 확인
   - 재현 단계 문서화
   - 에러 로그/스택 트레이스 수집

2. **근본 원인 파악**
   - 코드 분석
   - 의존성 확인
   - 영향 범위 파악

3. **수정 계획 수립**
   - 수정 방법 결정
   - 작업 체크리스트 작성
   - 테스트 계획 수립

4. **단일 문서 생성**
   - `fix-analysis.md`: **하나의 문서에 모든 내용 포함**
     - 증상
     - 근본 원인
     - 영향 범위
     - 수정 계획
     - 작업 체크리스트
     - 테스트 계획

5. **PostHook 검증**
   - fix-analysis.md 존재 확인
   - 최소 파일 크기 검증
   - Placeholder 검사
   - 필수 섹션 검증

## PostHook 이후 안내

PostHook 검증 통과 시, 다음 단계를 안내합니다:

```
✅ 버그 분석이 완료되었습니다:
- fix-analysis.md: 버그 분석 및 수정 계획

**다음 단계**:
1. `/review` - 분석 내용 검토 및 개선사항 확인 (권장)
2. `/implement` - 바로 수정 시작
```

**중요**: 사용자가 명시적으로 다음 명령어를 실행해야 합니다.

## 브랜치 관리 (선택)

브랜치가 필요한 경우 `/branch` 명령어를 사용하세요.

```bash
/branch "로그인 버그 수정"
# → fix-042-login-bug 브랜치 생성
```

## fix-analysis.md 구조

```markdown
# {Bug Title}

## 증상
- 무엇이 잘못되었는가
- 재현 단계
- 에러 메시지/로그

## 근본 원인
- 코드 분석 결과
- 왜 이 문제가 발생했는가

## 영향 범위
- 영향을 받는 기능/컴포넌트
- 사용자 영향도
- 우선순위

## 수정 계획
- 수정 방법
- 고려사항
- 대안 검토 (필요시)

## 작업 체크리스트
- [ ] 작업 1
- [ ] 작업 2
- [ ] ...

## 테스트 계획
- 단위 테스트
- 통합 테스트
- 수동 테스트 시나리오
```

## 예시

```bash
cd .specify/fixes/042-null-pointer
/plan-minor "장바구니 아이템 추가 시 null pointer 에러"
# → fix-analysis.md 생성
```

## Output Language

모든 출력은 **한글**로 작성합니다.

## 참고

- 복잡도 분석은 `/triage`에서 수행됩니다
- 이 명령어는 분석만 수행하며, 수정은 `/implement`에서 진행합니다
- PostHook 검증 실패 시 명령어가 차단됩니다 (exit code 2)
