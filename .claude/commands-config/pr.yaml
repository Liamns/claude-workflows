# PR Command Configuration
# Pull Request ìë™ ìƒì„±

extends: "_base.yaml"

# ============================================================================
# COMMAND INFO
# ============================================================================

command: "pr"
type: "utility"
description: "Pull Request ìë™ ìƒì„± with í…œí”Œë¦¿ ìë™ ì±„ìš°ê¸°"

# ============================================================================
# PREREQUISITES
# ============================================================================

prerequisites:
  - gh  # GitHub CLI
  - git

# ============================================================================
# TEMPLATES
# ============================================================================

templates:
  - path: ".claude/templates/git/pr-auto-fill.yaml"
    purpose: "PR í…œí”Œë¦¿ ìë™ ì±„ìš°ê¸° ê·œì¹™"
  - path: ".claude/templates/git/pr-template.md"
    purpose: "PR ë³¸ë¬¸ í…œí”Œë¦¿"
  - path: ".claude/templates/git/pr-sections-map.json"
    purpose: "ì„¹ì…˜ ë§¤í•‘"

# ============================================================================
# BASE BRANCH SELECTION
# ============================================================================

prompts:
  base_branch:
    mode: "interactive"
    header: "ğŸ¯ Select base branch for PR"
    default: "main"

    options:
      - value: "main"
        label: "main (Production)"
        description: "í”„ë¡œë•ì…˜ ë°°í¬ìš© ë¸Œëœì¹˜"

      - value: "develop"
        label: "develop (Development)"
        description: "ê°œë°œ í†µí•© ë¸Œëœì¹˜"

    # ìë™ ê°ì§€ ê·œì¹™
    auto_detect_rules:
      - branch_pattern: "^feature/.*"
        base_branch: "develop"
        confidence: "high"

      - branch_pattern: "^hotfix/.*"
        base_branch: "main"
        confidence: "high"

      - branch_pattern: "^fix/.*"
        base_branch: "develop"
        confidence: "medium"

# ============================================================================
# PR AUTO-FILL SETTINGS
# ============================================================================

auto_fill:
  enabled: true

  # ë°ì´í„° ì†ŒìŠ¤
  sources:
    - type: "spec_file"
      path: ".specify/spec.md"
      priority: 1

    - type: "git_commits"
      format: "grouped_by_type"
      priority: 2

    - type: "tasks_verification"
      path: ".specify/tasks.md"
      priority: 3

  # ì„¹ì…˜ë³„ ìë™ ì±„ìš°ê¸°
  sections:
    changes_detection: true
    description_generation: true
    test_generation: true
    screenshots: "auto_detect_ui_changes"
    references_generation: true
    checklist_validation: true

# ============================================================================
# HOOKS
# ============================================================================

hooks:
  pre_execution:
    - script: ".claude/hooks/pre-command/pr.sh"
      description: "ë¸Œëœì¹˜ ìƒíƒœ í™•ì¸"
      optional: true

# ============================================================================
# FLAGS
# ============================================================================

flags:
  - name: "--base"
    description: "Base branch ì§ì ‘ ì§€ì •"
    example: "/pr --base main"

  - name: "--draft"
    description: "Draft PR ìƒì„±"
    example: "/pr --draft"

  - name: "--auto-assign"
    description: "ë¦¬ë·°ì–´ ìë™ í• ë‹¹"
    example: "/pr --auto-assign"
