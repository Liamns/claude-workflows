# Tracker Command Configuration
# í”„ë¡œì íŠ¸ & ì´ìŠˆ íŠ¸ë˜ì»¤

extends: "_base.yaml"

# ============================================================================
# COMMAND INFO
# ============================================================================

command: "tracker"
type: "hybrid"
description: "í”„ë¡œì íŠ¸ ë° ì´ìŠˆ ì¶”ì  - ì¶”ê°€, ëª©ë¡, ìƒíƒœ ì—…ë°ì´íŠ¸, ë‹´ë‹¹ì ë°°ì •"

# ============================================================================
# NOTION INTEGRATION
# ============================================================================

notion:
  # Projects ë°ì´í„°ë² ì´ìŠ¤
  database_id: "2ad47c0869858041945cc55ee8474a2d"
  database_name: "Projects"

  # ë°ì´í„° ì†ŒìŠ¤
  data_source:
    id: "2ad47c08-6985-8016-b033-000bdcffaec7"
    url: "collection://2ad47c08-6985-8016-b033-000bdcffaec7"

  # ì†ì„± ë§¤í•‘
  property_mapping:
    title: "Project name"
    status: "Status"
    priority: "Priority"
    tag: "Tag"
    assignee: "Assignee"
    start_date: "Start date"
    end_date: "End date"
    team: "Team"
    progress: "Progress"

  # ìƒíƒœ ì˜µì…˜
  status_options:
    - name: "Not started"
      group: "to_do"
      description: "ì‹œì‘ ì „"
    - name: "In progress"
      group: "in_progress"
      description: "ì§„í–‰ ì¤‘"
    - name: "Done"
      group: "complete"
      description: "ì™„ë£Œ"

  # ìš°ì„ ìˆœìœ„ ì˜µì…˜
  priority_options:
    - name: "High"
      color: "red"
      description: "ê¸´ê¸‰"
    - name: "Medium"
      color: "yellow"
      description: "ë³´í†µ"
    - name: "Low"
      color: "green"
      description: "ë‚®ìŒ"

  # íƒœê·¸ ì˜µì…˜ (ì´ìŠˆ ìœ í˜•)
  tag_options:
    - name: "Issue"
      color: "orange"
      icon: "ğŸ“Œ"
      description: "ì¼ë°˜ ì´ìŠˆ"
    - name: "Bug"
      color: "purple"
      icon: "ğŸ›"
      description: "ë²„ê·¸"
    - name: "Feature"
      color: "red"
      icon: "âœ¨"
      description: "ìƒˆ ê¸°ëŠ¥"
    - name: "Refatoring"
      color: "default"
      icon: "ğŸ”§"
      description: "ë¦¬íŒ©í† ë§"

  # ë·° ì„¤ì •
  views:
    by_status:
      id: "2ad47c08-6985-80e2-8dbe-000c0076918e"
      type: "board"
      description: "ìƒíƒœë³„ ì¹¸ë°˜ ë³´ë“œ"
    all_projects:
      id: "2ad47c08-6985-80c5-8631-000ceb2987bf"
      type: "table"
      description: "ì „ì²´ í”„ë¡œì íŠ¸ í…Œì´ë¸”"
    gantt:
      id: "2ad47c08-6985-8077-9ca7-000c39871a05"
      type: "timeline"
      description: "ê°„íŠ¸ ì°¨íŠ¸"
    my_projects:
      id: "2ad47c08-6985-8076-a0ce-000c2c7ffee7"
      type: "table"
      description: "ë‚´ í”„ë¡œì íŠ¸"

# ============================================================================
# ACTIONS
# ============================================================================

actions:
  add:
    description: "ìƒˆ í”„ë¡œì íŠ¸/ì´ìŠˆ ì¶”ê°€"
    workflow:
      - step: "collect_title"
        description: "ì œëª© ì…ë ¥"
      - step: "select_tag"
        description: "ìœ í˜• ì„ íƒ (AskUserQuestion)"
      - step: "select_priority"
        description: "ìš°ì„ ìˆœìœ„ ì„ íƒ (AskUserQuestion)"
      - step: "create_page"
        description: "Notion í˜ì´ì§€ ìƒì„±"
    default_values:
      status: "Not started"
      start_date: "today"  # KST ê¸°ì¤€

  list:
    description: "í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ"
    filters:
      - status
      - priority
      - tag
      - assignee
    display_format: |
      ğŸ“‹ í”„ë¡œì íŠ¸ ëª©ë¡

      {projects}

      ì´ {count}ê°œ

  update:
    description: "ìƒíƒœ ì—…ë°ì´íŠ¸"
    requires:
      - page_id
      - status

  assign:
    description: "ë‹´ë‹¹ì ë°°ì •"
    workflow:
      - step: "get_users"
        description: "Notion ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ"
      - step: "select_user"
        description: "ë‹´ë‹¹ì ì„ íƒ (AskUserQuestion)"
      - step: "update_assignee"
        description: "ë‹´ë‹¹ì ì—…ë°ì´íŠ¸"

  close:
    description: "ì™„ë£Œ ì²˜ë¦¬"
    updates:
      status: "Done"
      end_date: "today"  # KST ê¸°ì¤€

# ============================================================================
# PROMPTS (AskUserQuestion ì„¤ì •)
# ============================================================================

prompts:
  tag_selection:
    question: "ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”"
    header: "Tag"
    multiSelect: false
    options:
      - label: "Issue"
        description: "ğŸ“Œ ì¼ë°˜ ì´ìŠˆ"
      - label: "Bug"
        description: "ğŸ› ë²„ê·¸ ìˆ˜ì •"
      - label: "Feature"
        description: "âœ¨ ìƒˆ ê¸°ëŠ¥ ì¶”ê°€"
      - label: "Refatoring"
        description: "ğŸ”§ ì½”ë“œ ë¦¬íŒ©í† ë§"

  priority_selection:
    question: "ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”"
    header: "Priority"
    multiSelect: false
    options:
      - label: "High"
        description: "ê¸´ê¸‰ - ì¦‰ì‹œ ì²˜ë¦¬"
      - label: "Medium"
        description: "ë³´í†µ - ì´ë²ˆ ì£¼ ë‚´ ì²˜ë¦¬"
      - label: "Low"
        description: "ë‚®ìŒ - ì—¬ìœ  ìˆê²Œ ì²˜ë¦¬"

  status_selection:
    question: "ìƒíƒœë¥¼ ì„ íƒí•˜ì„¸ìš”"
    header: "Status"
    multiSelect: false
    options:
      - label: "Not started"
        description: "ì‹œì‘ ì „"
      - label: "In progress"
        description: "ì§„í–‰ ì¤‘"
      - label: "Done"
        description: "ì™„ë£Œ"

  assignee_selection:
    question: "ë‹´ë‹¹ìë¥¼ ì„ íƒí•˜ì„¸ìš”"
    header: "Assignee"
    multiSelect: false
    # optionsëŠ” ë™ì ìœ¼ë¡œ Notion ì‚¬ìš©ì ëª©ë¡ì—ì„œ ë¡œë“œ

  filter_selection:
    question: "í•„í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”"
    header: "Filter"
    multiSelect: true
    options:
      - label: "ìƒíƒœë³„"
        description: "Status ê¸°ì¤€ í•„í„°"
      - label: "ìš°ì„ ìˆœìœ„ë³„"
        description: "Priority ê¸°ì¤€ í•„í„°"
      - label: "ìœ í˜•ë³„"
        description: "Tag ê¸°ì¤€ í•„í„°"

# ============================================================================
# DISPLAY ICONS
# ============================================================================

display:
  tag_icons:
    Issue: "ğŸ“Œ"
    Bug: "ğŸ›"
    Feature: "âœ¨"
    Refatoring: "ğŸ”§"

  priority_icons:
    High: "ğŸ”´"
    Medium: "ğŸŸ¡"
    Low: "ğŸŸ¢"

  status_icons:
    "Not started": "â¬œ"
    "In progress": "ğŸ”µ"
    "Done": "âœ…"

# ============================================================================
# RATE LIMITING
# ============================================================================

rate_limiting:
  enabled: true
  requests_per_second: 3
  delay_ms: 400

# ============================================================================
# SUPPORTING SCRIPTS
# ============================================================================

supporting_scripts:
  - path: ".claude/lib/notion-utils.sh"
    description: "Notion API ìœ í‹¸ë¦¬í‹°"

# ============================================================================
# NEXT COMMANDS
# ============================================================================

next_commands:
  enabled: true
  auto_prompt: true

  recommendations:
    - command: "/tracker list"
      trigger: "after_add"
      priority: 2
      auto_execute: false
      description: "í”„ë¡œì íŠ¸ ëª©ë¡ í™•ì¸"

    - command: "/docu start"
      trigger: "after_add"
      condition: "tag == 'Feature'"
      priority: 1
      auto_execute: false
      description: "ê¸°ëŠ¥ ëª…ì„¸ì„œ ê¸°ë°˜ ì‘ì—… ì‹œì‘"
