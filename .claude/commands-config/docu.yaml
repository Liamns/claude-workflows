# Docu Command Configuration
# Notion ê¸°ëŠ¥ ëª…ì„¸ì„œ í†µí•© ê´€ë¦¬

extends: "_base.yaml"

# ============================================================================
# COMMAND INFO
# ============================================================================

command: "docu"
type: "hybrid"
description: "Notion ê¸°ëŠ¥ ëª…ì„¸ì„œ í†µí•© ê´€ë¦¬ - ì‘ì—… ì‹œì‘, ëª©ë¡, ì „í™˜, ì¶”ì²œ, ë™ê¸°í™”"

# ============================================================================
# NOTION INTEGRATION
# ============================================================================

notion:
  # ê¸°ëŠ¥ ëª…ì„¸ì„œ í˜ì´ì§€
  parent_page_id: "2ac47c086985805185c3e48f0b7ce853"

  # ì±„ë„ë³„ ë°ì´í„° ì†ŒìŠ¤
  data_sources:
    í™”ì£¼:
      id: "2ac47c08-6985-811b-a177-000b9ea43547"
      description: "í™”ì£¼ ê¸°ëŠ¥ ëª…ì„¸ì„œ"

    ìš´ì†¡ì‚¬:
      id: "2ae47c08-6985-8179-bac0-e3bdda9c304d"
      description: "ìš´ì†¡ì‚¬ ê¸°ëŠ¥ ëª…ì„¸ì„œ"

  # ê¸°ë³¸ ì±„ë„
  default_channel: "í™”ì£¼"

  # ì†ì„± ë§¤í•‘
  property_mapping:
    title: "ê¸°ëŠ¥ëª…"
    status: "ì§„í–‰í˜„í™©"
    priority: "ìš°ì„ ìˆœìœ„"
    assignee: "ë‹´ë‹¹ì"
    start_date: "ì‹œì‘ì¼"
    end_date: "ì™„ë£Œì¼"
    group: "ê¸°ëŠ¥ ê·¸ë£¹"

  # ìƒíƒœ ì˜µì…˜
  status_options:
    - "ëŒ€ê¸°"
    - "ê°œë°œì¤‘"
    - "í…ŒìŠ¤íŠ¸ì¤‘"
    - "ë¦¬ë·°ì¤‘"
    - "ì™„ë£Œ"

  # ìš°ì„ ìˆœìœ„ ì˜µì…˜
  priority_options:
    - name: "P0"
      color: "red"
      description: "Critical - ì¦‰ì‹œ ì²˜ë¦¬"
    - name: "P1"
      color: "orange"
      description: "High - ì´ë²ˆ ìŠ¤í”„ë¦°íŠ¸"
    - name: "P2"
      color: "yellow"
      description: "Medium - ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸"
    - name: "P3"
      color: "green"
      description: "Low - ë°±ë¡œê·¸"

# ============================================================================
# ACTIONS
# ============================================================================

actions:
  start:
    description: "ê¸°ëŠ¥ ëª…ì„¸ì„œ ê¸°ë°˜ ì‘ì—… ì‹œì‘"
    workflow:
      - step: "search"
        description: "Notion ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰"
      - step: "select"
        description: "AskUserQuestionìœ¼ë¡œ ê¸°ëŠ¥ ì„ íƒ"
      - step: "parse_template"
        description: "í…œí”Œë¦¿ íŒŒì‹± (ê¸°ëŠ¥ ëª©ì , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì²´í¬ë¦¬ìŠ¤íŠ¸)"
      - step: "update_notion"
        description: "ì‹œì‘ì¼, ì§„í–‰í˜„í™© ì—…ë°ì´íŠ¸"
        requires_confirmation: true
      - step: "save_active_task"
        description: "active-tasks.jsonì— ì €ì¥"
      - step: "call_triage"
        description: "/triage ìë™ í˜¸ì¶œ"

  list:
    description: "ì§„í–‰ ì¤‘ì¸ ì‘ì—… ëª©ë¡"
    cache_file: ".claude/cache/active-tasks.json"
    display_format: |
      ğŸ“‹ ì§„í–‰ ì¤‘ì¸ ì‘ì—… ({count}ê°œ)

      {tasks}

      ğŸ’¡ '/docu switch <ë²ˆí˜¸>'ë¡œ ì‘ì—… ì „í™˜

  switch:
    description: "ë‹¤ë¥¸ ì‘ì—…ìœ¼ë¡œ ì „í™˜"
    requires_task_number: true

  recommend:
    description: "ë‹¤ìŒ ì‘ì—… ì¶”ì²œ"
    filter:
      status: "ëŒ€ê¸°"
    sort_by: "priority"
    limit: 3

  update:
    description: "í˜„ì¬ ì‘ì—… ìƒíƒœ ì—…ë°ì´íŠ¸"
    requires_status: true

  log:
    description: "ì‘ì—… ë¡œê·¸ ì¡°íšŒ"
    default_days: 7

  sync:
    description: "ì»¤ë°‹ ë‚´ì—­ Notion ë™ê¸°í™”"
    pending_file: ".claude/cache/pending-commits.json"

  search:
    description: "Notion ê²€ìƒ‰"
    requires_keyword: true

  close:
    description: "ì‘ì—… ì™„ë£Œ ì²˜ë¦¬"
    auto_recommend_next: true

  add:
    description: "ìƒˆ ê¸°ëŠ¥ì •ì˜ì„œ ì¶”ê°€"
    workflow:
      - step: "search_similar"
        description: "ìœ ì‚¬ ê¸°ëŠ¥ ê²€ìƒ‰"
      - step: "check_duplicate"
        description: "ì¤‘ë³µ í™•ì¸"
        requires_confirmation: true
      - step: "collect_info"
        description: "í•„ìˆ˜ ì •ë³´ ìˆ˜ì§‘"
      - step: "create_page"
        description: "Notion í˜ì´ì§€ ìƒì„±"

# ============================================================================
# PROMPTS (AskUserQuestion ì„¤ì •)
# ============================================================================

prompts:
  feature_selection:
    question: "ì–´ë–¤ ê¸°ëŠ¥ì„ ì‘ì—…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
    header: "Feature"
    multiSelect: false

  channel_selection:
    question: "ì–´ë–¤ ì±„ë„ì— ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
    header: "Channel"
    multiSelect: false
    options:
      - label: "í™”ì£¼"
        description: "í™”ì£¼ ì•± ê¸°ëŠ¥"
      - label: "ìš´ì†¡ì‚¬"
        description: "ìš´ì†¡ì‚¬ ì•± ê¸°ëŠ¥"
      - label: "ê¸°ì‚¬ì•±"
        description: "ê¸°ì‚¬ ì•± ê¸°ëŠ¥"
      - label: "ê³µí†µ"
        description: "ê³µí†µ ê¸°ëŠ¥"

  priority_selection:
    question: "ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”"
    header: "Priority"
    multiSelect: false
    options:
      - label: "P0 - Critical"
        description: "ì¦‰ì‹œ ì²˜ë¦¬ í•„ìš”"
      - label: "P1 - High"
        description: "ì´ë²ˆ ìŠ¤í”„ë¦°íŠ¸ ë‚´ ì²˜ë¦¬"
      - label: "P2 - Medium"
        description: "ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸ ì˜ˆì •"
      - label: "P3 - Low"
        description: "ë°±ë¡œê·¸"

  update_confirmation:
    question: "Notion í˜ì´ì§€ë¥¼ ì—…ë°ì´íŠ¸í• ê¹Œìš”?"
    header: "Update"
    multiSelect: false
    options:
      - label: "ì˜ˆ, ì—…ë°ì´íŠ¸"
        description: "ì‹œì‘ì¼ê³¼ ì§„í–‰í˜„í™©ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤"
      - label: "ì•„ë‹ˆì˜¤, ê±´ë„ˆë›°ê¸°"
        description: "ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"

  duplicate_check:
    question: "ìœ ì‚¬ ê¸°ëŠ¥ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
    header: "Duplicate"
    multiSelect: false
    options:
      - label: "ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜ì •"
        description: "ìœ„ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ìˆ˜ì •"
      - label: "ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€"
        description: "ìƒˆ ê¸°ëŠ¥ì •ì˜ì„œ ìƒì„±"
      - label: "ì·¨ì†Œ"
        description: "ì‘ì—… ì·¨ì†Œ"

# ============================================================================
# SUPPORTING SCRIPTS
# ============================================================================

supporting_scripts:
  - path: ".claude/lib/notion-utils.sh"
    description: "Notion API ìœ í‹¸ë¦¬í‹°"

  - path: ".claude/lib/notion-active-tasks.sh"
    description: "Active Tasks ê´€ë¦¬"

# ============================================================================
# CACHE
# ============================================================================

cache:
  active_tasks: ".claude/cache/active-tasks.json"
  pending_commits: ".claude/cache/pending-commits.json"
  session_info: ".claude/cache/notion-session.json"

# ============================================================================
# NEXT COMMANDS
# ============================================================================

next_commands:
  enabled: true
  auto_prompt: true

  recommendations:
    - command: "/triage"
      trigger: "after_start"
      priority: 1
      auto_execute: true
      description: "ì›Œí¬í”Œë¡œìš° ë¶„ë¥˜ ì‹œì‘"

    - command: "/docu list"
      trigger: "after_close"
      priority: 2
      auto_execute: false
      description: "ë‚¨ì€ ì‘ì—… í™•ì¸"

    - command: "/docu recommend"
      trigger: "after_close"
      priority: 1
      auto_execute: true
      description: "ë‹¤ìŒ ì‘ì—… ì¶”ì²œ"

# ============================================================================
# MIGRATION (ë ˆê±°ì‹œ ëª…ë ¹ì–´ ì•ˆë‚´)
# ============================================================================

migration:
  legacy_commands:
    - old: "/notion-start"
      new: "/docu start"
    - old: "/notion-list"
      new: "/docu list"
    - old: "/notion-switch"
      new: "/docu switch"
    - old: "/notion-recommend"
      new: "/docu recommend"
    - old: "/notion-sync-commits"
      new: "/docu sync"
    - old: "/notion-add"
      new: "/docu add"
